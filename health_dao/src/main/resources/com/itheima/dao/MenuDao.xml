<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itheima.dao.MenuDao" >
    <!--根据名字查询menu-->
    <select id="findMenuOne" parameterType="string" resultType="com.itheima.pojo.Menu" >
       SELECT tm.name
FROM t_menu tm
WHERE tm.id IN (
	SELECT trm.menu_id
	FROM t_role_menu trm
	WHERE trm.role_id IN (
		SELECT tr.id
		FROM t_role tr, t_user_role tur
		WHERE tur.role_id = tr.id
			AND tr.id IN (
				SELECT tur.role_id
				FROM t_user tu, t_user_role tur
				WHERE tu.id = tur.user_id
					AND username = #{username}
			)
	)
) AND ISNULL(parentMenuId)

    </select>
    <!--g根据子父菜单查子菜单-->
    <select id="finMenuSon" parameterType="int" resultType="com.itheima.pojo.Menu">
        SELECT * FROM t_menu m WHERE m.parentMenuId =#{parentMenuId}
    </select>
</mapper>
